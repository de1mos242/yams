# yams
Yet  another messaging system

## Description
Messaging system that allows users to register, see all registered users, 
send them messages and see messages their own messages by filter.

## How to run
1. Start PosgreSQL and Kafka: `docker-compose up -d`
2. Move to application folder: `cd yams-server/`
3. Run tests: `./mvnw verify`
4. Start application: `./mvnw spring-boot:run`
5. API is available at http://localhost:8080/swagger-ui/

## Technologies
* Kotlin (JVM 11+)
* Spring boot
* WebFlux + Kotlin coroutines
* PostgreSQL + jOOQ + R2DBC + Liquibase
* Kafka
* Swagger gen + Swagger UI

## Key points
* Api classes are generated by Swagger CodeGen, using spring-kotlin generator
* jOOQ classes are generated by Liquibase migration scripts
* All web endpoints use reactive approach and implemented through Kotlin coroutines
* Messages send to Kafka with `senderId` as a key, so all user's messages will be 
stored and appeared in an order as they arrived

## Problems
* R2DBC has problems with transactions
* No Kafka deserialization support
* Kafka uses default configuration, e.g. partitions number for topic
* No pagination for endpoints that return potential unbounded collection

## Improvements
* Add graceful shutdown
* Split tests to unit and integration
* Split code into separate runnable modules
* Run migrations as a separate step 
* Add logging config to send in ELK or similar
* Add error tracing like Sentry
* Add building Docker image using Buildpacks 
